FROM node:lts

RUN apt-get -yq update \
  && apt-get install -yq git

RUN npm install -g @vue/cli

WORKDIR /opt/frontend

RUN chown node. /opt/frontend

EXPOSE 8080

USER node

COPY src/frontend/package*.json ./

RUN npm install

CMD ["npm", "run", "dev"]